<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body></body>
  <script type="module">
    import { wrap } from 'comlink';
    import DenoWorker from './src/deno-worker?worker';
    import { Kernel } from './src/deno/denix';
    import { Global } from './src/kernel/global';

    (async () => {
      const denix = await Kernel.create();
      denix.initNetwork();
      Global.fs = denix.fs;

      const worker = wrap(new DenoWorker());
      await worker.init();
      await worker.run('https://deno.land/std@0.115.1/http/file_server.ts');
    })();
  </script>
</html>
